<!doctype html>
<html>
   <head>
     <title>sID Social Identity</title>
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
     <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
     <link rel="shortcut icon" href="/icons/logo.ico" />
     <link rel="stylesheet" href="/stylesheets/home.css">
     <link rel="stylesheet" href="/stylesheets/search.css">
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
   </head>

   <body style="padding-right:0px; padding-left:0px; background-color: #D1E5F9">
     <!-- Navigation -->
     <!-- <nav class="navbar navbar-default navbar-fixed-top"> -->
     <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="margin-bottom:0" id="landingnavbar">
         <div class="container-fluid" >
             <!-- Brand and toggle get grouped for better mobile display -->
             <div class="navbar-header"
                  style="background-color: rgba(255,255,255,.15); color: rgba(255,255,255,.15); background: transparent; margin-top: 10px;">
                 <button type="button" class="navbar-toggle" data-toggle="collapse"
                         data-target="#bs-example-navbar-collapse-1">
                     <span class="sr-only">Toggle navigation</span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                 </button>
                 <a class="navbar-brand page-scroll" href="/">sID Social Identity</a>
             </div>
             <!-- Collect the nav links, forms, and other content for toggling -->
             <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                 <ul class="nav navbar-nav navbar-right">
                     <li class="hidden">
                         <a href="#home"></a>
                     </li>
                     <!-- <li>
                     <a class="page-scroll" href="#home" style="padding: 7px 20px;">Home</a>
                     </li> -->
                     <!--<li>-->
                     <!--<a class="page-scroll" href="#platforms">Platforms</a>-->
                     <!--</li>-->
                     <!--<li>-->
                     <!--<a class="page-scroll" href="#progress">Progress</a>-->
                     <!--</li>-->
                     <!--<li>-->
                     <!--<a class="page-scroll" href="#contactus">Contact</a>-->
                     <!--</li>-->
                     <!-- <li><a href="/logout"><span class="glyphicon glyphicon-log-in"></span> Sign Out </a></li> -->
                     <li style="margin-right: 20px; margin-top: 10px; ">
                         <a class="page-scroll" href="/logout"><span class="glyphicon glyphicon-log-in"></span> Sign Out </a>
                     </li>


                 </ul>
                 <div class="col-xs-12 col-sm-5 col-md-5 pull-left" style="margin-top: 10px;">
                     <form class="navbar-form" role="search" action="/overview" method="post" id="sidusersearchform">
                         <div class="input-group" style="width: 100%;">
                             <input type="text" class="form-control" name="name" placeholder="Search sID" id="sidusersearch">

                             <div class="input-group-btn">
                                 <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i>
                                 </button>
                             </div>
                         </div>
                     </form>

                     <!-- <div id="sidusersearch">
                       <input class="typeahead" type="text" placeholder="Search sID">
                     </div> -->
                 </div>
             </div>
             <!-- /.navbar-collapse -->
         </div>
         <!-- /.container-fluid -->
     </nav>
      <div class="container">
         <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-4">
               <div class="row">
                  <div class="panel panel-default">
                     <div class="panel panel-header">
                       <% if(user.userDetails.facebook && user.userDetails.facebook.token){ %>
                         <img src="https://graph.facebook.com/v2.3/<%= user.userDetails.facebook.uid %>/picture" id="homepage_fb_pic">
                       <% } else { %>

                       <% } %>
                        <!-- <img src="/img/homepage/facebook_leftblank.png" id="facebook_leftblank"> -->
                     </div>
                     <div class="panel-body">
                              <!-- check if the user has this token (is the user authenticated with this social account) -->
                              <% if (user.userDetails.facebook) { %>
                              <% if (user.userDetails.facebook.token) { %>
                              <p>
                                 <strong>Name</strong>: <%= user.userDetails.facebook.name %><br>
                                 <strong>Email</strong>: <%= user.userDetails.facebook.email %><br>
                              </p>
                              <div class="row">
                                  <!-- <div class="col-xs-12 col-sm-4"><a href="/unlink/facebook" class="btn btn-primary">Unlink Profile</a></div>
                                  <div class="col-xs-12 col-sm-4"><a href="/linkedinmyratings" class="btn btn-primary">My Ratings</a></div>
                                  <div class="col-xs-12 col-sm-4"><a href="/linkedinratedByMe" class="btn btn-primary">Rated By Me</a></div> -->
                                  <div class="btn-group btn-group-justified">
                                    <a href="/linkedinmyratings" class="btn btn-primary">My Ratings</a>
                                    <a href="/linkedinratedByMe" class="btn btn-primary">Rated by me</a>
                                    <a href="/unlink/facebook" class="btn btn-primary">Unlink</a>
                                  </div>
                              </div>
                              <% } else { %>
                              <div align="center">
                                 <a href="/connect/facebook" class="btn btn-primary">Connect Facebook</a>
                              </div>
                              <% } %>
                              <% } else { %>
                              <div align="center">
                                 <a href="/connect/facebook" class="btn btn-primary">Connect Facebook</a>
                              </div>
                              <% } %>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="panel panel-default">
                     <div class="panel panel-header">
                       <% if(user.userDetails.linkedin && user.userDetails.linkedin.token){ %>
                         <img src="<%= user.userDetails.linkedin.photo %>" id="homepage_linkedin_pic">
                       <% } else { %>

                       <% } %>
                        <!-- <img src="/img/homepage/linkedin_leftblank.png" id="facebook_leftblank"> -->
                     </div>
                     <div class="panel-body">
                              <!-- check if the user has this token (is the user authenticated with this social account) -->
                              <% if (user.userDetails.linkedin) { %>
                              <% if (user.userDetails.linkedin.token) { %>
                              <p>
                                 <strong>Name</strong>: <%= user.userDetails.linkedin.name %><br>
                                 <strong>Email</strong>: <%= user.userDetails.linkedin.email %><br>
                              </p>
                              <div class="row">
                                  <!-- <div class="col-xs-12 col-sm-4"><a href="/unlink/facebook" class="btn btn-primary">Unlink Profile</a></div>
                                  <div class="col-xs-12 col-sm-4"><a href="/linkedinmyratings" class="btn btn-primary">My Ratings</a></div>
                                  <div class="col-xs-12 col-sm-4"><a href="/linkedinratedByMe" class="btn btn-primary">Rated By Me</a></div> -->
                                  <div class="btn-group btn-group-justified">
                                    <a href="/linkedinmyratings" class="btn btn-primary">My Ratings</a>
                                    <a href="/linkedinratedByMe" class="btn btn-primary">Rated by me</a>
                                    <a href="/unlink/linkedin" class="btn btn-primary">Unlink</a>

                                  </div>
                              </div>
                              <% } else { %>
                              <div align="center">
                                 <a href="/connect/linkedin" class="btn btn-primary">Connect LinkedIn</a>
                              </div>
                              <% } %>
                              <% } else { %>
                              <div align="center">
                                 <a href="/connect/linkedin" class="btn btn-primary">Connect LinkedIn</a>
                              </div>
                              <% } %>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="panel panel-default">
                     <div class="panel-body">
                              <h3><span class="fa fa-user"></span> sID Account</h3>
                              <% if (user.userDetails.local.email) { %>
                              <p>
                                 <strong>Name</strong>: <%= user.userDetails.local.firstname %> <%= user.userDetails.local.lastname %>
                                 <br>
                                 <strong>Email</strong>: <%= user.userDetails.local.email %><br>
                                 <strong>Member Since</strong>: <%= user.userDetails.created %><br>
                              </p>
                              <!-- Trigger the modal with a button -->
                              <!-- <div align="center">
                                 <button type="button" class="btn btn-default col-xs-12" data-toggle="modal" data-target="#myModal">
                                 Change Password
                                 </button>
                              </div> -->
                              <div class="btn-group btn-group-justified">
                                <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Change Password</a>
                              </div>
                              <!-- Modal -->
                              <div id="myModal" class="modal fade bs-example-modal-xs" tabindex="-1" role="dialog">
                                 <div class="modal-dialog modal-xs">
                                    <!-- Modal content-->
                                    <div class="modal-content">
                                       <div class="modal-header">
                                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                                          <h4 class="modal-title">Change Password</h4>
                                       </div>
                                       <div class="modal-body">
                                          <!-- LOGIN FORM -->
                                          <div ng-app="angular-validator-demo" ng-controller="DemoCtrl">
                                             <form action="/changepassword" method="post" name="myForm"
                                                class="form-horizontal"
                                                novalidate angular-validator>
                                                <div class="form-group">
                                                   <label>Old Password</label>
                                                   <input type="password"
                                                      name="oldpassword"
                                                      class="form-control"
                                                      ng-model="form.oldpassword"
                                                      invalid-message="passwordValidator(form.password)"
                                                      validate-on="dirty"
                                                      required>
                                                </div>
                                                <div class="form-group">
                                                   <label>Password</label>
                                                   <input type="password"
                                                      name="password"
                                                      class="form-control"
                                                      ng-model="form.password"
                                                      invalid-message="passwordValidator(form.password)"
                                                      validate-on="dirty"
                                                      required>
                                                </div>
                                                <div class="form-group">
                                                   <label>Confirm Password</label>
                                                   <input type="password"
                                                      name="confirmPassword"
                                                      class="form-control"
                                                      ng-model="form.confirmPassword"
                                                      validator="form.password === form.confirmPassword"
                                                      validate-on="dirty"
                                                      invalid-message="'Passwords do not match!'"
                                                      required>
                                                </div>
                                                <br>
                                                <div class="form-group">
                                                   <div align="center">
                                                      <button type="submit" class="btn btn-primary">Submit</button>
                                                      <button type="button" ng-click="myForm.reset()" class="btn btn-danger">
                                                      Reset
                                                      </button>
                                                   </div>
                                                </div>
                                             </form>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <!--<a href="/unlink/local" class="btn btn-default">Unlink</a>-->
                              <% } else { %>
                              <!--<a href="/connect/local" class="btn btn-default">Connect Local</a>-->
                              <% } %>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-8">
               <div class="panel panel-default">
                  <div class="panel-heading text-center">
                     <h3><span class="fa fa-facebook"></span> Facebook Profiles Rated By Me </h3>
                  </div>
                  <div class="panel-body">
                     <div id="facebook-ratedbymelist"></div>
                  </div>
               </div>
            </div>
         </div>
         <div class="row">
         </div>
         <div class="row">
         </div>
      </div>
      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.21/angular.min.js"></script>
      <script src="/scripts/angular-validator-app.js"></script>
      <script src="/scripts/angular-validator.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
      <script type="text/javascript">
          $.post("/rate/facebook/getAllUsersRatedByMe",
          function(data,status){
            var $content = $('#facebook-ratedbymelist');
            if(data.data.length > 0){
              for(var i = 0; i < data.data.length; i++){
                var profileLink = 'https://www.facebook.com/' + data.data[i].targetid.uid;
                $content.append("<a href=" + profileLink + " target='_blank'>" + data.data[i].targetid.name + "</a><br>");
              }
            }else {
                $content.append("<div class='text-center'> You have not rated any Facebook profiles.</div>");
            }
          });
      </script>
      <script type="text/javascript" src="scripts/typeahead.bundle.js"></script>
      <script type="text/javascript" src="scripts/bloodhound.js"></script>
      <script type="text/javascript" src="scripts/search.js"></script>
   </body>
</html>
